<html>
  <head>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type" />
    <meta content="utf-8" http-equiv="encoding" />
    <style>
      body {
        width: 100%;
        height: 100vh;
        margin: 0;
        padding: 0;
      }

      .draggable {
        position: absolute;
        width: 100px;
        height: 100px;
      }

      .red {
        background-color: red;
      }

      .blue {
        background-color: blue;
      }

      .green {
        background-color: green;
      }
    </style>
  </head>
  <body>
    <div class="draggable red"></div>
    <div class="draggable blue"></div>
    <div class="draggable green"></div>
    <div class="draggable red"></div>
    <div class="draggable blue"></div>
    <div class="draggable green"></div>

    <script>
      window.onload = () => {
        let selectedElement, clickOffset, maxZIndex = 0;
        document.addEventListener("mousedown", (e) => {
          if (e.target.classList.contains("draggable")) {
            selectedElement = e.target;
            clickOffset = [e.layerX, e.layerY];
            e.target.style["z-index"] = maxZIndex++;
          }
        });
        document.addEventListener("mouseup", (e) => {
          selectedElement = undefined;
          clickOffset = undefined;
        });
        document.addEventListener("mousemove", (e) => {
          if (selectedElement === undefined) return;
          selectedElement.style.top = e.clientY - clickOffset[1];
          selectedElement.style.left = e.clientX - clickOffset[0];
        });
      };
    </script>
  </body>
</html>
